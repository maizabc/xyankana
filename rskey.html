<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Kh√¥i ph·ª•c m·∫≠t kh·∫©u</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container py-5">
  <h3 class="mb-4">üîê Kh√¥i ph·ª•c m·∫≠t kh·∫©u</h3>
  <input type="text" id="username" class="form-control mb-3" placeholder="T√™n t√†i kho·∫£n">
  <input type="email" id="email" class="form-control mb-3" placeholder="Gmail ƒë√£ ƒëƒÉng k√Ω">
  <button onclick="sendOtp()" class="btn btn-info mb-3">G·ª≠i m√£ x√°c nh·∫≠n</button>

  <div id="verifySection" style="display: none;">
    <input type="text" id="otp" class="form-control mb-2" placeholder="Nh·∫≠p m√£ x√°c nh·∫≠n">
    <input type="password" id="newPass" class="form-control mb-2" placeholder="M·∫≠t kh·∫©u m·ªõi">
    <button onclick="resetPassword()" class="btn btn-success">ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u</button>
  </div>
</div>

<script>
let users = JSON.parse(localStorage.getItem("users") || "{}");
let otpCode = "";

function sendOtp() {
  const user = document.getElementById("username").value.trim();
  const email = document.getElementById("email").value.trim();

  if (!users[user] || users[user].email !== email) {
    alert("‚ùå T√™n t√†i kho·∫£n ho·∫∑c Gmail kh√¥ng kh·ªõp!");
    return;
  }

  otpCode = Math.floor(100000 + Math.random() * 900000).toString();
  alert(`‚úÖ M√£ x√°c nh·∫≠n ƒë√£ g·ª≠i (demo): ${otpCode}`);
  document.getElementById("verifySection").style.display = "block";
}

function resetPassword() {
  const otp = document.getElementById("otp").value.trim();
  const newPass = document.getElementById("newPass").value;
  const user = document.getElementById("username").value.trim();

  if (otp !== otpCode) {
    alert("‚ùå M√£ x√°c nh·∫≠n kh√¥ng ƒë√∫ng!");
    return;
  }

  if (!newPass) {
    alert("‚ö†Ô∏è Nh·∫≠p m·∫≠t kh·∫©u m·ªõi!");
    return;
  }

  users[user].password = newPass;
  localStorage.setItem("users", JSON.stringify(users));
  alert("‚úÖ ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng! B·∫°n c√≥ th·ªÉ ƒëƒÉng nh·∫≠p l·∫°i.");
  window.location.href = "login.html";
}
</script>
</body>
</html>
